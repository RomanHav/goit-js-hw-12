{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport let pagination = {\n  page: 1,\n  per_page: 15,\n};\nexport let totalHits = 0;\nexport async function fetchInfo(searchWord) {\n  try {\n    const params = {\n      q: searchWord,\n      key: '43138861-aa01fee7d014e33c8f4078e7d',\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    };\n\n    const response = await axios.get(\n      `https://pixabay.com/api/?key=${params.key}&q=${params.q}&image_type=${params.image_type}&orientation=${params.orientation}&safesearch=${params.safesearch}&page=${pagination.page}&per_page=${pagination.per_page}`\n    );\n    // page += 1;\n    if (response.status !== 200) {\n      throw new Error(response.status);\n    }\n    totalHits = response.data.totalHits;\n    return response.data;\n  } catch (error) {\n    console.error('Fetch error:', error);\n    throw error;\n  }\n}\n","import { fetchInfo } from './pixabay-api';\n// import { inputValue } from '../main';\n\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst input = document.querySelector('.search');\nconst loadButton = document.querySelector('.load-button');\nexport const gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\nexport async function markup() {\n  loader.style.display = 'block';\n\n  try {\n    const data = await fetchInfo(input.value.trim());\n    if (data.hits.length === 0) {\n      loader.style.display = 'none';\n\n      iziToast.error({\n        theme: 'dark',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: '#FAFAFB',\n        backgroundColor: '#EF4040',\n        position: 'topRight',\n        progressBarColor: '#B51B1B',\n      });\n      loadButton.style.display = 'none';\n    } else {\n      const images = data.hits\n        .map(element => {\n          return `<li class=\"gallery-item\">\n        <a class=\"image-link\" href=\"${element.largeImageURL}\">\n        <img class=\"image\" src=\"${element.webformatURL}\" alt=\"${element.tags}\" />\n        </a>\n        <ul class=\"about-image\">\n        <li class=\"likes\">\n            <span class=\"likes-title\">Likes</span>\n            <span class=\"likes-count\">${element.likes}</span>\n            </li>\n            <li class=\"views\">\n            <span class=\"views-title\">Views</span>\n            <span class=\"views-count\">${element.views}</span>\n            </li>\n            <li class=\"comments\">\n            <span class=\"comments-title\">Comments</span>\n            <span class=\"comments-count\">${element.comments}</span>\n            </li>\n            <li class=\"downloads\">\n            <span class=\"downloads-title\">Downloads</span>\n            <span class=\"downloads-count\">${element.downloads}</span>\n            </li>\n            </ul>\n            </li>`;\n        })\n        .join('');\n      loader.style.display = 'none';\n      gallery.insertAdjacentHTML('beforeend', images);\n      let largeGallery = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionsDelay: 250,\n      });\n      largeGallery.refresh();\n      // loadButton.style.display = 'block';\n      const item = document.querySelector('.gallery-item');\n      const rect = item.getBoundingClientRect();\n      console.log(item.getBoundingClientRect());\n      window.scrollBy({\n        top: rect.height * 2,\n        behavior: 'smooth',\n      });\n    }\n  } catch (error) {\n    console.error('Error fetching data:', error);\n  }\n}\n","// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { markup, gallery } from './js/render-functions';\nimport { pagination, totalHits } from './js/pixabay-api';\n\nconst loadBtn = document.querySelector('.load-button');\nloadBtn.style.display = 'none';\nconst input = document.querySelector('.search');\nconst button = document.querySelector('.button');\n\nlet inputValue = '';\nfunction request() {\n  inputValue = input.value.trim();\n  return inputValue;\n}\nfunction saveSearchWord() {\n  const searchWord = inputValue;\n  return searchWord;\n}\nfunction renderImages(evt) {\n  evt.preventDefault();\n\n  saveSearchWord();\n  if (request().length === 0) {\n    console.log(`${request()}----`);\n    iziToast.error({\n      theme: 'dark',\n      message: 'The field must be fullfield',\n      messageColor: '#FAFAFB',\n      backgroundColor: '#EF4040',\n      position: 'topRight',\n      progressBarColor: '#B51B1B',\n    });\n  } else {\n    console.log(request());\n    gallery.innerHTML = '';\n    pagination.page = 1;\n    markup();\n    input.value = '';\n    loadBtn.style.display = 'block';\n  }\n}\n\nloadBtn.addEventListener('click', event => {\n  pagination.page++;\n\n  input.value = saveSearchWord();\n  const totalPages = Math.ceil(totalHits / pagination.per_page);\n  const loadItems = pagination.page * pagination.per_page;\n\n  if (pagination.page === totalPages) {\n    pagination.per_page = loadItems - totalHits;\n    console.log(pagination.per_page);\n    markup();\n    event.target.style.display = 'none';\n\n    return iziToast.info({\n      position: 'topRight',\n      message: \"We're sorry, there are no more posts to load\",\n    });\n  }\n  markup();\n  input.value = '';\n});\n\nbutton.addEventListener('click', renderImages);\n// button.addEventListener('click', clearInput);\n"],"names":["pagination","totalHits","fetchInfo","searchWord","params","response","axios","error","input","loadButton","gallery","loader","markup","data","iziToast","images","element","SimpleLightbox","item","rect","loadBtn","button","inputValue","request","saveSearchWord","renderImages","evt","event","totalPages","loadItems"],"mappings":"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"}